---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map(project => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<Layout title={`${project.data.title} - Rohit Medpalli`}>
  <main class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto">
      <a href="/projects" class="text-cyan-400 hover:text-cyan-300 mb-8 inline-block">‚Üê Back to Projects</a>
      
      <article class="prose prose-invert prose-headings:text-white prose-h1:text-4xl prose-h2:text-2xl prose-h3:text-xl prose-p:text-gray-300 prose-a:text-cyan-400 hover:prose-a:text-cyan-300 prose-strong:text-white prose-code:text-cyan-300 prose-pre:bg-gray-900 prose-pre:border prose-pre:border-gray-800 prose-pre:rounded-xl max-w-none">
        {project.data.image && (
          <div class="mb-8 not-prose">
            <img 
              src={project.data.image.url} 
              alt={project.data.image.alt} 
              class="rounded-xl w-full"
            />
          </div>
        )}

        <div class="flex flex-wrap gap-2 mb-8 not-prose">
          {project.data.technologies.map((tech) => (
            <span class="px-3 py-1 bg-cyan-400/10 text-cyan-400 rounded-full text-sm">
              {tech}
            </span>
          ))}
        </div>

        <div class="flex gap-4 mb-8 not-prose">
          {project.data.github && (
            <a 
              href={project.data.github}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 text-cyan-400 hover:text-cyan-300"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
              </svg>
              View on GitHub
            </a>
          )}
          
          {project.data.demo && (
            <a 
              href={project.data.demo}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 text-cyan-400 hover:text-cyan-300"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
              </svg>
              Live Demo
            </a>
          )}
        </div>

        <Content />
      </article>
    </div>
  </main>
</Layout>
